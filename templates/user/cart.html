{% include 'user/cart_header.html' %}


<section class="ftco-section ftco-cart">
    <div class="container">
        <div class="row">
            <div class="col-md-12 ftco-animate">
                <div class="cart-list">
                    <form action="/payment" method="post">
                        {% csrf_token %}

                        <table class="table">
                            <thead class="thead-primary">
                            <tr class="text-center">
                                <th>&nbsp;</th>
                                <th>&nbsp;</th>
                                <th>Product name</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th></th>
                            </tr>


                            </thead>

                            <tbody>
                            {% for i in model %}

                                <input type="hidden" name="cartid" value="{{ i.id }}">
                                {#                                <input type="hidden" name="cartid" value="{{ i.id }}">#}
                                {#                                <input type="hidden" name="model" value="app.models.Cart">#}



                                <tr class="price-row" data-price="{{ i.price }}">
                                    <td>{{ forloop.counter }}</td>
                                    <td><img src="/static/profile/{{ i.productid.profile }}" height="100"></td>
                                    <td>{{ i.productid.name }}</td>
                                    <td>{{ i.quantity }}</td>
                                    <td>Rs. {{ i.productid.price }}</td>

                                    <td>Rs. {{ i.price }}</td>
                                    <td>
                                        <a href="/deletecart/{{ i.id }}">Remove</a>
{#                                        <a href="/delete/Cart/{{ i.id }}">Remove</a>#}
                                    </td>

                                </tr>
                            {% endfor %}
                            <input type="hidden" name="userid" value="{{ request.session.user_id }}">

                            <tr>
                                <td colspan="5" style="text-align: right!important;">Sub Total</td>
                                <td> <input type="text" id="totalprice" name="subtotal" class="text-right"></td>
                                <td>
                                    <input type="submit" value="Make Payment" class="btn btn-primary">

                                    {#                                    <a href="/payment?customerid={{ i.customerid.id }}&productid={{ i.productid.id }}"#}
                                    {#                                       class="btn btn-primary">Make payment</a>#}
                                    {#                                    <a href="/transactions?productid={{ i.productid.id }}"#}
                                    {#                                       class="btn btn-primary">Make payment</a>#}
                                </td>

                            </tr>
                            </tbody>

                        </table>

                    </form>

                    <script>
                        var rows = document.getElementsByClassName('price-row')
                        var totalprice = 0
                        for (var i = 0; i < rows.length; i++) {


                            if (rows[i]) {
                                var price = rows[i].getAttribute('data-price')
                                totalprice += parseFloat(price)
                            }
                        }

                        document.getElementById('totalprice').value = totalprice
                    </script>
                </div>
            </div>
        </div>
    </div>
</section>


<div class="container">
    <div class="row">


    </div>
</div>
<br>
<br>
{% include 'footer.html' %}


{##}
{#<section class="ftco-section ftco-cart">#}
{#			<div class="container">#}
{#				<div class="row">#}
{#    			<div class="col-md-12 ftco-animate">#}
{#    				<div class="cart-list">#}
{#	    				<table class="table">#}
{#						    <thead class="thead-primary">#}
{#						      <tr class="text-center">#}
{#						        <th>&nbsp;</th>#}
{#						        <th>&nbsp;</th>#}
{#						        <th>Product name</th>#}
{#						        <th>Price</th>#}
{#						        <th>Quantity</th>#}
{#						        <th>Total</th>#}
{#						      </tr>#}
{#						    </thead>#}